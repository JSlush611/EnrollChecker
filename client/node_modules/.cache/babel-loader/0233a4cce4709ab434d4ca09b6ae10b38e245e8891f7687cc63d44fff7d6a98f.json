{"ast":null,"code":"var _jsxFileName = \"/Users/jonathanschluesche/Desktop/EnrollChecker/client/src/scenes/widgets/CoursesWidget.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setCourses } from \"state\";\nimport CourseWidget from \"./CourseWidget\";\nimport { IconButton } from \"@mui/material\";\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CoursesWidget = _ref => {\n  _s();\n  let {\n    userId,\n    isProfile = false,\n    searchText\n  } = _ref;\n  const dispatch = useDispatch();\n  const courses = useSelector(state => state.courses);\n  const token = useSelector(state => state.token);\n  const pageSize = 5; // Number of courses per page\n\n  const [page, setPage] = useState(1); // Current page\n\n  const getCourses = async () => {\n    const response = await fetch(\"http://localhost:3001/courses/show\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    dispatch(setCourses({\n      courses: data\n    }));\n  };\n  const getUserCourses = async () => {\n    const response = await fetch(`http://localhost:3001/users/${userId}/subscriptions`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    dispatch(setCourses({\n      courses: data\n    }));\n  };\n  useEffect(() => {\n    if (isProfile) {\n      getUserCourses();\n    } else {\n      getCourses();\n    }\n    // eslint-disable-next-line\n  }, []);\n  const filteredCourses = courses.filter(course => {\n    const searchRegex = new RegExp(searchText, \"i\");\n    const designationMatch = searchRegex.test(course.courseDesignation);\n    const titleMatch = searchRegex.test(course.title);\n    return designationMatch || titleMatch;\n  });\n  const totalPages = Math.ceil(filteredCourses.length / pageSize);\n  const handleNextPage = () => {\n    if (page < totalPages) {\n      setPage(prevPage => prevPage + 1);\n    }\n  };\n  const handlePrevPage = () => {\n    if (page > 1) {\n      setPage(prevPage => prevPage - 1);\n    }\n  };\n  const startIndex = (page - 1) * pageSize;\n  const endIndex = page * pageSize;\n  const visibleCourses = filteredCourses.slice(startIndex, endIndex);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [visibleCourses.map(_ref2 => {\n      let {\n        _id,\n        title,\n        credits,\n        termCode,\n        subjectCode,\n        courseID,\n        courseDesignation,\n        subscribed\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(CourseWidget, {\n        courseId: _id,\n        title: title,\n        credits: credits,\n        termCode: termCode,\n        subjectCode: subjectCode,\n        courseID: courseID,\n        courseDesignation: courseDesignation,\n        subscribed: subscribed\n      }, _id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this);\n    }), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handlePrevPage,\n        disabled: page === 1,\n        children: /*#__PURE__*/_jsxDEV(NavigateBeforeIcon, {\n          sx: {\n            fontSize: \"lage\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleNextPage,\n        disabled: page === totalPages,\n        children: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(CoursesWidget, \"Q/CM8uhPiKLKMw0FxgGoYhI2r78=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = CoursesWidget;\nexport default CoursesWidget;\nvar _c;\n$RefreshReg$(_c, \"CoursesWidget\");","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","setCourses","CourseWidget","IconButton","NavigateBeforeIcon","NavigateNextIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","CoursesWidget","_ref","_s","userId","isProfile","searchText","dispatch","courses","state","token","pageSize","page","setPage","getCourses","response","fetch","method","headers","Authorization","data","json","getUserCourses","filteredCourses","filter","course","searchRegex","RegExp","designationMatch","test","courseDesignation","titleMatch","title","totalPages","Math","ceil","length","handleNextPage","prevPage","handlePrevPage","startIndex","endIndex","visibleCourses","slice","children","map","_ref2","_id","credits","termCode","subjectCode","courseID","subscribed","courseId","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","sx","fontSize","_c","$RefreshReg$"],"sources":["/Users/jonathanschluesche/Desktop/EnrollChecker/client/src/scenes/widgets/CoursesWidget.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setCourses } from \"state\";\nimport CourseWidget from \"./CourseWidget\";\nimport { IconButton } from \"@mui/material\";\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\n\nconst CoursesWidget = ({ userId, isProfile = false, searchText }) => {\n  const dispatch = useDispatch();\n  const courses = useSelector((state) => state.courses);\n  const token = useSelector((state) => state.token);\n  const pageSize = 5; // Number of courses per page\n\n  const [page, setPage] = useState(1); // Current page\n\n  const getCourses = async () => {\n    const response = await fetch(\"http://localhost:3001/courses/show\", {\n      method: \"GET\",\n      headers: { Authorization: `Bearer ${token}` },\n    });\n\n    const data = await response.json();\n    dispatch(setCourses({ courses: data }));\n  };\n\n  const getUserCourses = async () => {\n    const response = await fetch(\n      `http://localhost:3001/users/${userId}/subscriptions`,\n      {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n\n    const data = await response.json();\n    dispatch(setCourses({ courses: data }));\n  };\n\n  useEffect(() => {\n    if (isProfile) {\n      getUserCourses();\n    } else {\n      getCourses();\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const filteredCourses = courses.filter((course) => {\n    const searchRegex = new RegExp(searchText, \"i\");\n    const designationMatch = searchRegex.test(course.courseDesignation);\n    const titleMatch = searchRegex.test(course.title);\n    return designationMatch || titleMatch;\n  });\n\n  const totalPages = Math.ceil(filteredCourses.length / pageSize);\n\n  const handleNextPage = () => {\n    if (page < totalPages) {\n      setPage((prevPage) => prevPage + 1);\n    }\n  };\n\n  const handlePrevPage = () => {\n    if (page > 1) {\n      setPage((prevPage) => prevPage - 1);\n    }\n  };\n\n  const startIndex = (page - 1) * pageSize;\n  const endIndex = page * pageSize;\n  const visibleCourses = filteredCourses.slice(startIndex, endIndex);\n\n  return (\n    <>\n      {visibleCourses.map(\n        ({\n          _id,\n          title,\n          credits,\n          termCode,\n          subjectCode,\n          courseID,\n          courseDesignation,\n          subscribed,\n        }) => (\n          <CourseWidget\n            key={_id}\n            courseId={_id}\n            title={title}\n            credits={credits}\n            termCode={termCode}\n            subjectCode={subjectCode}\n            courseID={courseID}\n            courseDesignation={courseDesignation}\n            subscribed={subscribed}\n          />\n        )\n      )}\n      {/* Pagination buttons */}\n      {totalPages > 1 && (\n        <div>\n          <IconButton onClick={handlePrevPage} disabled={page === 1}>\n            <NavigateBeforeIcon sx={ {fontSize: \"lage\"}}/>\n          </IconButton>\n\n          <span>{page}</span>\n\n          <IconButton onClick={handleNextPage} disabled={page === totalPages}>\n          <NavigateNextIcon/>\n          </IconButton>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default CoursesWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}