{"ast":null,"code":"var _jsxFileName = \"/Users/jonathanschluesche/Desktop/EnrollChecker/client/src/scenes/widgets/CourseWidget.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Box, Typography, useTheme, Button } from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport WidgetWrapper from \"components/WidgetWrapper\";\nimport { useState, useEffect } from \"react\";\nimport { setSubscriptions } from \"state\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CourseWidget = _ref => {\n  _s();\n  let {\n    courseId,\n    title,\n    credits,\n    termCode,\n    subjectCode,\n    courseID,\n    courseDesignation,\n    subscribed,\n    description\n  } = _ref;\n  const dispatch = useDispatch();\n  const token = useSelector(state => state.token);\n  const loggedInUserId = useSelector(state => state.user._id);\n  const {\n    palette\n  } = useTheme();\n  const primary = palette.primary.main;\n  const courseList = useSelector(state => state.courseList);\n  const isSubscribed = courseList.some(course => course._id === courseId);\n  const subscribeCourse = async () => {\n    const isCourseAlreadySubscribed = courseList.length > 0 && courseList.some(course => course._id === courseId);\n    if (isCourseAlreadySubscribed) {\n      toast.error(\"Course is already subscribed\");\n    } else {\n      const response = await fetch(`http://localhost:3001/courses/subscribe/${loggedInUserId}/${courseId}`, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      dispatch(setSubscriptions({\n        courseList: data\n      }));\n    }\n  };\n  const unsubscribeCourse = async () => {\n    const isCourseAlreadySubscribed = courseList.length > 0 && courseList.some(course => course._id === courseId);\n    if (!isCourseAlreadySubscribed) {\n      console.log(\"error\");\n      return;\n    }\n    ;\n    const response = await fetch(`http://localhost:3001/courses/unsubscribe/${loggedInUserId}/${courseId}`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    dispatch(setSubscriptions({\n      courseList: data\n    }));\n  };\n  const handleToggleSubscription = async () => {\n    if (isSubscribed) {\n      await unsubscribeCourse();\n      toast.error(\"Course successfully unsubscribed\", {\n        autoClose: 1200\n      });\n    } else {\n      await subscribeCourse();\n      toast.success(\"Course successfully subscribed\", {\n        autoClose: 1200\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(WidgetWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      p: \"1rem\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        sx: {\n          color: primary\n        },\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: `Credits: ${credits}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: `Course Designation: ${courseDesignation}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        sx: {\n          whiteSpace: \"pre-wrap\"\n        },\n        children: `\\nDescription: ${description}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: handleToggleSubscription,\n        sx: {\n          marginTop: \"1rem\"\n        },\n        children: isSubscribed ? \"Unsubscribe\" : \"Subscribe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"bottom-right\",\n      style: {\n        fontSize: \"20px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(CourseWidget, \"eZCoiz67Voz+wpb8y5TfHX+khJ0=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useTheme, useSelector];\n});\n_c = CourseWidget;\nexport default CourseWidget;\nvar _c;\n$RefreshReg$(_c, \"CourseWidget\");","map":{"version":3,"names":["React","Box","Typography","useTheme","Button","useDispatch","useSelector","WidgetWrapper","useState","useEffect","setSubscriptions","ToastContainer","toast","jsxDEV","_jsxDEV","CourseWidget","_ref","_s","courseId","title","credits","termCode","subjectCode","courseID","courseDesignation","subscribed","description","dispatch","token","state","loggedInUserId","user","_id","palette","primary","main","courseList","isSubscribed","some","course","subscribeCourse","isCourseAlreadySubscribed","length","error","response","fetch","method","headers","Authorization","data","json","unsubscribeCourse","console","log","handleToggleSubscription","autoClose","success","children","p","variant","sx","color","fileName","_jsxFileName","lineNumber","columnNumber","whiteSpace","onClick","marginTop","position","style","fontSize","_c","$RefreshReg$"],"sources":["/Users/jonathanschluesche/Desktop/EnrollChecker/client/src/scenes/widgets/CourseWidget.jsx"],"sourcesContent":["import React from \"react\";\nimport { Box, Typography, useTheme, Button } from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport WidgetWrapper from \"components/WidgetWrapper\";\nimport { useState, useEffect } from \"react\";\nimport { setSubscriptions } from \"state\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n\nconst CourseWidget = ({\n  courseId,\n  title,\n  credits,\n  termCode,\n  subjectCode,\n  courseID,\n  courseDesignation,\n  subscribed,\n  description,\n}) => {\n  const dispatch = useDispatch();\n  const token = useSelector((state) => state.token);\n  const loggedInUserId = useSelector((state) => state.user._id);\n\n  const { palette } = useTheme();\n  const primary = palette.primary.main;\n\n  const courseList = useSelector((state) => state.courseList);\n  const isSubscribed = courseList.some((course) => course._id === courseId);\n\n\n  const subscribeCourse = async () => {\n    const isCourseAlreadySubscribed = courseList.length > 0 && courseList.some(\n      (course) => course._id === courseId\n      );\n  \n    if (isCourseAlreadySubscribed) {\n      toast.error(\"Course is already subscribed\");\n    } else {\n      const response = await fetch(\n        `http://localhost:3001/courses/subscribe/${loggedInUserId}/${courseId}`,\n        {\n          method: \"GET\",\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      const data = await response.json();\n      dispatch(setSubscriptions({ courseList: data }));\n    }\n  };\n\n\n  const unsubscribeCourse = async () => {\n    const isCourseAlreadySubscribed = courseList.length > 0 && courseList.some(\n      (course) => course._id === courseId\n    );\n  \n    if (!isCourseAlreadySubscribed) {\n      console.log(\"error\")\n      return;\n    };\n  \n    const response = await fetch(\n      `http://localhost:3001/courses/unsubscribe/${loggedInUserId}/${courseId}`,\n      {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    const data = await response.json();\n    dispatch(setSubscriptions({ courseList: data }));\n  };\n\n  const handleToggleSubscription = async () => {\n    if (isSubscribed) {\n      await unsubscribeCourse();\n      toast.error(\"Course successfully unsubscribed\", {\n        autoClose: 1200,\n      });\n    } else {\n      await subscribeCourse();\n      toast.success(\"Course successfully subscribed\", { autoClose: 1200 });\n    }\n  };\n\n\n\n  return (\n    <WidgetWrapper>\n      <Box p=\"1rem\">\n        <Typography variant=\"h6\" sx={{ color: primary }}>\n          {title}\n        </Typography>\n        <Typography variant=\"body1\">{`Credits: ${credits}`}</Typography>\n        <Typography variant=\"body1\">{`Course Designation: ${courseDesignation}`}</Typography>\n        <Typography variant=\"body1\" sx={{ whiteSpace: \"pre-wrap\" }}>{`\\nDescription: ${description}`}</Typography> {/* Add the new line */}\n        <Button\n          variant=\"outlined\"\n          onClick={handleToggleSubscription}\n          sx={{ marginTop: \"1rem\" }}\n        >\n          {isSubscribed ? \"Unsubscribe\" : \"Subscribe\"}\n          \n        </Button>\n      </Box>\n      <ToastContainer \n          position=\"bottom-right\" \n          style={{ fontSize: \"20px\",\n        }}/>\n    </WidgetWrapper>\n  );\n};\n\nexport default CourseWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}